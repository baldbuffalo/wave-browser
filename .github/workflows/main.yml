name: Fetch libcurl for WiiU

# Trigger manually or on push to main
on:
  workflow_dispatch:
  push:
    branches:
      - main

jobs:
  fetch-libcurl:
    runs-on: ubuntu-latest

    steps:
    # 1. Checkout your repo
    - name: Checkout repo
      uses: actions/checkout@v3

    # 2. Remove old libcurl (optional)
    - name: Remove old libcurl
      run: rm -rf curl

    # 3. Clone the latest libcurl wrapper for WiiU
    - name: Clone latest libcurl
      run: git clone https://github.com/wiiu-env/libcurlwrapper.git curl

    # 4. Commit and push changes back to the repo
    - name: Commit and push
      run: |
        git config --global user.name "GitHub Actions"
        git config --global user.email "actions@github.com"
        git add curl
        git commit -m "Update libcurl to latest upstream"
        git push origin main
